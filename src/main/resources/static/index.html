<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <meta charset="UTF-8" />
  <title>NeuroLink</title>
  <style>
    * {
      box-sizing: border-box;
      
    }

   body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  height: 100vh;
  background-color: #d3d3d3;
  /* ‚úÖ Background image styles */
  
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
}


    h1 {
      margin-top: 40px;
      font-size: 2rem;
      color: #2c3e50;
    }

    .tagline {
      margin-top: 5px;
      color: black;
      font-size: 14px;
    }

    .ai-box {
      background: white;
      margin-top: 30px;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      max-width: 700px;
      width: 90%;
      text-align: center;
    }

    form {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      align-items: center;
    }

    input[type="text"] {
      padding: 14px;
      font-size: 18px;
      border-radius: 10px;
      border: 1px solid #ccc;
      width: 100%;
      max-width: 480px;
      transition: 0.3s;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 7px rgba(52, 152, 219, 0.4);
    }

    .button-group {
      display: flex;
      gap: 20px;
      justify-content: center;
      width: 100%;
      max-width: 480px;
      margin-top: 20px;
    }

    button.ai-btn {
      flex: 1;
      padding: 14px 0;
      font-size: 18px;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      color: white;
      position: relative;
      transition: background-color 0.3s ease;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    button.ai-btn svg {
      width: 24px;
      height: 24px;
    }

    button#ollama {
      background-color: #27ae60; /* green */
    }

    button#ollama:hover {
      background-color: #1e8c4a;
    }

    button#deepseek {
      background-color: #2980b9; /* blue */
    }

    button#deepseek:hover {
      background-color: #1f6391;
    }

    /* Tooltip */
    button.ai-btn[data-tip]:hover::after {
      content: attr(data-tip);
      position: absolute;
      bottom: -40px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #2c3e50;
      color: white;
      padding: 7px 14px;
      font-size: 13px;
      border-radius: 6px;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0.95;
      z-index: 100;
    }

    pre {
      margin-top: 35px;
      background: #fff;
      padding: 22px;
      border-radius: 14px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.09);
      color: #2c3e50;
      white-space: pre-wrap;
      word-wrap: break-word;
      min-height: 90px;
      max-width: 700px;
      width: 90%;
      font-size: 16px;
    }

    @media (max-width: 520px) {
      .button-group {
        flex-direction: column;
      }

      button.ai-btn {
        width: 100%;
      }

      input[type="text"] {
        max-width: 100%;
      }
    }
    
  </style>
</head>
<body>

  <h1>NeuroLink</h1>
  <p1>AI Assistant</p1>
  <div class="tagline">Ask your questions offline or online ‚Äî choose your AI engine below</div>

  <div class="ai-box">
    <form id="aiForm">
      <input
        type="text"
        id="message"
        placeholder="Enter your message..."
        autocomplete="off"
        required
      />

      <div class="button-group">
        <button
          type="submit"
          class="ai-btn"
          id="ollama"
          data-tip="Offline, fast & secure ‚Äî Ollama Gemma 2B"
          data-model="ollama"
        >
          üñ•Ô∏è GO Offline
        </button>
        <button
          type="submit"
          class="ai-btn"
          id="deepseek"
          data-tip="Online API with advanced AI ‚Äî DeepSeek Chat"
          data-model="deepseek"
        >
          üåê Go Online 
        </button>
      </div>
    </form>
  </div>
<button onclick="window.open('/chat/history/view', '_blank')">üìú Open Chat History</button>
<br>

  <button id="openChatBtn" style="
    background: linear-gradient(to right, #2980b9, #27ae60);
    color: white;
    font-size: 12px;
    padding: 14px 28px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(41, 128, 185, 0.4);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  ">
    Open ChatGPT like Interface
  </button>

  <script>
    document.getElementById('openChatBtn').addEventListener('click', () => {
      window.open('/chat/converse', '_blank');
    });
  </script>
</body>


  <pre id="response">Waiting for your question...</pre>




  <script>
  const form = document.getElementById('aiForm');
  const messageInput = document.getElementById('message');
  const responseBox = document.getElementById('response');
  const historyBox = document.getElementById('historyBox');
  const toggleHistoryBtn = document.getElementById('toggleHistoryBtn');

  let selectedModel = null;
  let isHistoryVisible = false;

  document.querySelectorAll('.ai-btn').forEach((btn) => {
    btn.addEventListener('click', (e) => {
      selectedModel = e.currentTarget.getAttribute('data-model');
    });
  });

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    if (!selectedModel) {
      responseBox.textContent = '‚ö†Ô∏è Please select Ollama or DeepSeek by clicking the button.';
      return;
    }

    const message = messageInput.value.trim();
    if (!message) {
      responseBox.textContent = '‚ö†Ô∏è Please enter a message.';
      return;
    }

    responseBox.textContent = 'Thinking...';

    let url;
    if (selectedModel === 'ollama') {
      url = `/ai/generate?message=${encodeURIComponent(message)}`;
    } else if (selectedModel === 'deepseek') {
      url = `/api/deepseek/chat?prompt=${encodeURIComponent(message)}`;
    }

    fetch(url)
      .then((response) => response.json())
      .then((data) => {
        const content = data.generation || data.response || JSON.stringify(data, null, 2);
        responseBox.textContent = content;
        selectedModel = null;
      })
      .catch((error) => {
        responseBox.textContent = 'Error: ' + error.message;
        selectedModel = null;
      });
  });

  toggleHistoryBtn.addEventListener('click', () => {
    if (isHistoryVisible) {
      historyBox.style.display = 'none';
      toggleHistoryBtn.textContent = 'üìú Show Chat History';
      isHistoryVisible = false;
    } else {
      historyBox.innerHTML = 'Loading history...';
      fetch('/api/chat/history')
        .then((res) => res.json())
        .then((data) => {
          if (data.length === 0) {
            historyBox.innerHTML = '<em>No history found.</em>';
            return;
          }

          let html = '<h3>üìú Chat History</h3><ul style="padding-left: 0; list-style: none;">';
          data.reverse().forEach(item => {
            html += `
              <li style="margin-bottom: 15px; padding: 12px; background: #f8f8f8; border-radius: 10px;">
                <strong>Model:</strong> ${item.modelUsed}<br/>
                <strong>Prompt:</strong> ${item.prompt}<br/>
                <strong>Response:</strong> ${item.response}<br/>
                <small><em>${item.timestamp}</em></small>
              </li>
            `;
          });
          html += '</ul>';
          historyBox.innerHTML = html;
          historyBox.style.display = 'block';
          toggleHistoryBtn.textContent = '‚ùå Hide Chat History';
          isHistoryVisible = true;
        })
        .catch(err => {
          historyBox.innerHTML = '‚ùå Failed to load history: ' + err.message;
        });
    }
  });
 // document.getElementById('openChatBtn').addEventListener('click', () => {
	  // Option 1: Open in a new tab
//	  window.open('/chat/converse', '_blank');

	  // Option 2: Open in the same tab, uncomment below and comment above if you want this instead
	  // window.location.href = '/chat/converse';
//	});

</script>

  



  </script>
<footer style="
  margin-top: 50px;
  background-color: #2c3e50;
  color: white;
  padding: 20px 0;
  text-align: center;
  width: 100%;
">
  <div style="margin-bottom: 8px; font-size: 18px;">üë©‚Äçüíª Meet the Developer</div>

  <div style="display: flex; justify-content: center; gap: 30px; align-items: center; font-size: 24px;">
    <a href="https://instagram.com/shikhar_bhardwaj__" target="_blank" style="color: #E4405F;">
      <i class="fab fa-instagram"></i>
    </a>
    <a href="https://linkedin.com/in/shikharbhardwaj123" target="_blank" style="color: #0A66C2;">
      <i class="fab fa-linkedin"></i>
    </a>
    <a href="mailto:bhardwajshikhar934@gmail.com" style="color: #D44638;">
      <i class="fas fa-envelope"></i>
    </a>
  </div>
</footer>
  
</body>
</html>
